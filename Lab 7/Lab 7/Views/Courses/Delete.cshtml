@model Lab_7.Models.Course

@{
    ViewData["Title"] = "Delete Course";
    bool hasEnrollments = Model.Enrollments != null && Model.Enrollments.Any();
}

<div class="d-flex align-items-center mb-4 @(hasEnrollments ? "text-muted" : "text-danger")">
    <i class="fas fa-book-dead fa-2x me-3"></i>
    <h1 class="m-0 fw-bold">Delete Course</h1>
</div>

@if (hasEnrollments)
{
    <div class="alert alert-warning rounded-4 border-0 shadow-sm mb-4 bg-warning bg-opacity-10 text-dark">
        <h5 class="fw-bold"><i class="fas fa-lock me-2 text-warning"></i>Action Blocked</h5>
        <p class="mb-0">This course currently has <strong>@Model.Enrollments.Count</strong> students enrolled. You cannot delete a course while enrollment data exists.</p>
    </div>
}
else
{
    <div class="alert alert-danger rounded-4 border-0 shadow-sm mb-4 bg-danger bg-opacity-10 text-danger">
        <h5 class="fw-bold"><i class="fas fa-exclamation-triangle me-2"></i>Permanent Deletion?</h5>
        <p class="mb-0">Are you sure you want to permanently delete the course <strong>@Model.Title</strong> from the system?</p>
    </div>
}

<div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
    <div class="card-header bg-light border-0 py-3">
        <h5 class="card-title m-0 fw-bold text-muted small uppercase ls-1">Course Details</h5>
    </div>
    <div class="card-body p-4">
        <dl class="row mb-0">
            <dt class="col-sm-3 text-muted">Course ID</dt>
            <dd class="col-sm-9 fw-bold">@Model.CourseID</dd>

            <dt class="col-sm-3 text-muted">Title</dt>
            <dd class="col-sm-9">@Model.Title</dd>

            <dt class="col-sm-3 text-muted">Department</dt>
            <dd class="col-sm-9 text-success fw-bold">@Model.Department.Name</dd>

            <dt class="col-sm-3 text-muted">Enrollment Count</dt>
            <dd class="col-sm-9 @(hasEnrollments ? "text-danger fw-bold" : "")">
                <i class="fas fa-users me-1"></i> @(Model.Enrollments?.Count ?? 0) Students
            </dd>
        </dl>
    </div>
</div>

<form asp-action="Delete">
    <input type="hidden" asp-for="CourseID" />
    <div class="d-flex gap-2 align-items-center">
        @if (hasEnrollments)
        {
            <button type="button" class="btn btn-danger rounded-pill px-4 opacity-50 shadow-sm" disabled>
                Unable to Delete
            </button>
        }
        else
        {
            <button type="submit" class="btn btn-danger rounded-pill px-4 shadow-sm fw-bold">
                Confirm Delete
            </button>
        }
        <a asp-action="Index" class="btn btn-outline-secondary rounded-pill px-4 border-0 text-decoration-none">Back to List</a>
    </div>
</form>